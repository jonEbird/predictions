$def with (games, people, names, pindex, charts, selected_season, seasons)
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Game Predictions</title>
<link type="text/css" rel="stylesheet" href="/static/style.css" media="Screen">
<link type="text/css" rel="stylesheet" href="/static/mobile.css" media="handheld"/>
<!-- http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js -->
<!-- <script type="text/javascript" src="/static/jquery.min.js"></script> -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10919802-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Game');
        $for name in names:
            data.addColumn('number', '$name');
        data.addRows($len(games)+1);
        <!-- start the graph at zeros -->
        data.setValue(0, 0, 'Season Start');
	$for i, person in enumerate(people):
	    data.setValue(0, ${pindex[person.name]+1}, 0);
	$for i, game in enumerate(games, 1):
            $if game.done:
    	        data.setValue($i, 0, '$game.opponent');
                $for j, pdt in enumerate(game.predictions):
                    data.setValue($i, ${pindex[pdt.person.name]+1}, ${abs(game.hscore - pdt.home) + abs(game.ascore - pdt.away)});

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, {width: 1000, height: 500, title: 'Prediction Performance'});
    }
</script>
</head>
<body>

<div id="content">

<p id="seasons">
$for season in seasons[:-1]:
    <a href="?season=$season">$season</a> |
<a href="?season=$seasons[-1]">Current Season</a> | <a href="mugs">Mugshots</a>
</p>

<h1 class="inset">Games We Like to Make Predictions On</h1>

<ul>
$for i, game in enumerate(games):
    <div id="clearinghouse"></div>
    $if game.done:
        <li><p class="game">
        $for mugshot in game.mugshots:
            <img class="winningpic" src="/$mugshot" />
	$if game.coffee_winningnames:
            $game.winningnames wins the prediction!
            But $game.coffee_winningnames wins coffee! <img class="coffee" src="/static/coffee.jpg" /></br>
        $else:
            $game.winningnames wins coffee! <img class="coffee" src="/static/coffee.jpg" /></br>
        Final score on $game.gametime.strftime('%b %d') was <a href="$game.ahref/?season=$selected_season">$game.hometeam ($game.hscore) - $game.awayteam ($game.ascore)</a>
        [<span class="stats">$game.mean +- $game.stddev</span>]
        </p></li>
    $else:
        <li><p class="game">On $game.gametime.strftime('%A, %b %d at %H:%M') <a href="$game.ahref/?season=$selected_season">$game.hometeam hosts $game.awayteam</a>. Get your predictions in!
        </li></p>
</ul>
<p class="disclaimer">Data shown in the brackets are statistics on the game predictions. [mean +- standard deviation]</p>

<h3 class="inset">Season Stats</h3>
<ul id="stats_text">
$for person in people:
    <li><p> $person.name has been off by <b>$person.tot_delta</b> in the course of $person.tot_games games.</p></li>
</ul>
<img src="$:charts[0]" width="300" height="225" alt="Season Stats" />
<div id="clearinghouse"></div>
<div id="chart_div"></div>
</div>

</body>
</html>
